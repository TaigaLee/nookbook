<%- include("../partials/header.ejs") %>
<% if(!notcurrentUser) { %>
<div class='user-auth'>
    <a href="/user/add-pic">add profile picture</a>
    <a href="/user/edit">Edit My Profile</a>
    <a href="/island/<%= user.island.id%>/update">Update My Island</a>
</div>
<% } %>
<div class='usershow'>
    <div class='profile'>
        <div class="card">
            <h3 class='card-title'><%= user.username %></h3>
            <img src="/user/<%= user._id %>/pic" class="profile-pic" />
        </div>
    </div>

    <div class="status">
        <h4>Status: <%= user.status %></h4>
        <form action="/user/<%= user.id %>/add-friend?_method=PUT" method="post">
        <% if(notcurrentUser && loggedIn && !isFriend) { %>
        <button>Add Friend</button>
        <% } %>
    </form>
    </div>

    <div class="friend"><h3>Friends</h3>
    <ul>
        <% friends.forEach( (friend) => {%>
            <li><%= friend.username %></li>
        <% }) %>
    </ul>
    </div>
    <div class='post'>
        <h3>Posts</h3>
        <div class='post-content'>
            <div class="list-group">
                <% posts.forEach( (post) => {%>
                    <a href="/rating-pictures/<%= post._id %>" class="list-group-item">
                        <img src="/rating-pictures/<%= post._id %>/img" />
                        <%= post.name %>                            
                    </a>
                <% }) %>
            </div>
        </div>
    </div>

    <div class="island-snapshot">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title"><%= user.island.name %></h3>
            </div>
            <div>
                Native Fruit:&nbsp<%= user.island.fruit %>
            </div>
            <div>
                Hemisphere:&nbsp<%= user.island.hemisphere %>
            </div>
            <div>
                Current Turnip Price:&nbsp<%= user.island.turnipPrice%>
            </div>
        </div>
    </div>
</div>
<%- include("../partials/footer.ejs")%>
