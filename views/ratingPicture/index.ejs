<%- include("../partials/header.ejs") %>

<h2>this page shows a list of pictures to rate</h2>

<% if (message) { %>
    <div class="message-box">
        <%= message %>
    </div>
<% } %>

<% if(loggedIn) { %>
<a href="/rating-pictures/new">Add Something To Rate</a>
<% } %> 

<ul>
    <% pictures.forEach((picture) => { %>
    <div class='rate-picture'>
        <div class='card'>
            <a href="/rating-pictures/<%=picture._id %>">
                <div class="card-header">
                    <h3>
                    <%= picture.name %>    
                    </h3>
                </div>
            </a>
            <img src="/rating-pictures/<%=picture._id %>/img" class='card-img-top'>
            <p>Likes: <%= picture.likes.length %></p>
            <% if(! picture.likes.includes(userId) && loggedIn) { %>
                <form action="/rating-pictures/<%= picture._id %>?_method=put" method="post">
                  <button>Like Picture</button>
                </form>
            <% } %>
        </div>
    </div>
    <% }) %>
</ul>

<%- include("../partials/footer.ejs")%>
